<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‚öíÔ∏è DungeonForge - Roguelike Game with AI Images</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Courier New', monospace;
      background: #0a0e27;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
    }
    .container {
      max-width: 900px;
      width: 100%;
      background: linear-gradient(135deg, #1a1f3a 0%, #16213e 100%);
      border: 2px solid #00d4ff;
      border-radius: 10px;
      padding: 30px;
      box-shadow: 0 0 30px rgba(0, 212, 255, 0.3);
    }
    header {
      text-align: center;
      margin-bottom: 30px;
      border-bottom: 2px solid #00d4ff;
      padding-bottom: 20px;
    }
    header h1 { font-size: 2.5em; color: #00d4ff; }
    header p { color: #aaa; font-size: 0.9em; }
    
    .game-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .panel {
      background: rgba(0, 20, 40, 0.7);
      border: 1px solid #00d4ff;
      border-radius: 5px;
      padding: 20px;
    }
    
    .panel h3 {
      color: #00d4ff;
      margin-bottom: 15px;
      border-bottom: 1px solid #00d4ff;
      padding-bottom: 10px;
    }
    
    .stats {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    
    .stat-item {
      background: rgba(0, 212, 255, 0.1);
      padding: 10px;
      border-radius: 3px;
      border-left: 3px solid #00d4ff;
    }
    
    .stat-item strong { color: #00d4ff; }
    .stat-item span { color: #aaa; font-size: 0.9em; }
    
    .buttons {
      display: flex;
      gap: 10px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }
    
    button {
      flex: 1;
      min-width: 150px;
      padding: 15px;
      background: linear-gradient(135deg, #00d4ff 0%, #0099cc 100%);
      color: #000;
      border: none;
      border-radius: 5px;
      font-weight: bold;
      cursor: pointer;
      font-size: 1em;
      transition: all 0.3s;
    }
    
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 20px rgba(0, 212, 255, 0.5);
    }
    
    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .output {
      background: rgba(0, 20, 40, 0.9);
      border: 1px solid #00d4ff;
      border-radius: 5px;
      padding: 20px;
      max-height: 300px;
      overflow-y: auto;
      font-size: 0.9em;
      line-height: 1.6;
    }
    
    .character-image {
      width: 100%;
      max-height: 400px;
      border-radius: 8px;
      margin: 10px 0;
      border: 2px solid #00d4ff;
      object-fit: cover;
    }
    
    .room-title { color: #ffaa00; margin-bottom: 10px; font-weight: bold; }
    .combat-log { color: #ff4444; margin: 5px 0; }
    .success { color: #44ff44; margin: 5px 0; }
    .loading { color: #ffff44; font-style: italic; }
    
    @media (max-width: 600px) {
      .game-grid { grid-template-columns: 1fr; }
      header h1 { font-size: 1.8em; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>‚öíÔ∏è DungeonForge</h1>
      <p>Roguelike Dungeon Crawler - Now with AI-Generated Character Portraits!</p>
    </header>

    <div class="game-grid">
      <div class="panel">
        <h3>üë§ Character Stats</h3>
        <div class="stats" id="playerStats">
          <div class="stat-item">
            <strong>CLASS:</strong><br>
            <span id="charClass">Warrior</span>
          </div>
          <div class="stat-item">
            <strong>HP:</strong><br>
            <span id="playerHP">100 / 100</span>
          </div>
          <div class="stat-item">
            <strong>RARITY:</strong><br>
            <span id="rarity">Common</span>
          </div>
          <div class="stat-item">
            <strong>FLOOR:</strong><br>
            <span id="floor">1</span>
          </div>
          <div class="stat-item">
            <strong>STR:</strong><br>
            <span id="strength">10</span>
          </div>
          <div class="stat-item">
            <strong>AGI:</strong><br>
            <span id="agility">10</span>
          </div>
        </div>
      </div>

      <div class="panel">
        <h3>üë§ Character Portrait</h3>
        <img id="characterPortrait" class="character-image" src="" alt="Character Portrait" style="display:none;">
        <p id="portraitStatus" style="color: #aaa; text-align: center;">Generate a character to see portrait</p>
      </div>
    </div>

    <div class="buttons">
      <button onclick="generateCharacter()">üé≤ New Character</button>
      <button onclick="generatePortrait()" id="portraitBtn" disabled>üé¨ Generate Portrait</button>
      <button onclick="enterDungeon()">üö™ Enter Dungeon</button>
      <button onclick="resetGame()">‚Üª Reset</button>
    </div>

    <div class="panel">
      <h3>üìú Game Log</h3>
      <div class="output" id="gameLog">
        <p>Welcome to DungeonForge! Click "üé≤ New Character" to start your adventure.</p>
        <p style="color: #ffff44; margin-top: 10px; font-size: 0.85em;">New: AI-powered character portraits powered by Pollinations.ai!</p>
      </div>
    </div>
  </div>

  <script>
    const gameState = {
      player: {
        class: 'Warrior',
        rarity: 'Common',
        strength: 10,
        agility: 10,
        intelligence: 8,
        maxHP: 50,
        hp: 50,
        level: 1,
        exp: 0,
        floor: 1
      }
    };

    const data = {
      classes: ['Warrior', 'Mage', 'Rogue', 'Paladin'],
      rarities: ['Common', 'Uncommon', 'Rare', 'Epic', 'Legendary'],
      monsters: ['Goblin', 'Orc', 'Skeleton', 'Dark Knight', 'Demon', 'Dragon']
    };

    function log(message) {
      const logEl = document.getElementById('gameLog');
      const msgClass = getMessageClass(message);
      logEl.innerHTML = '<p class="' + msgClass + '">' + message + '</p>' + logEl.innerHTML;
    }

    function getMessageClass(msg) {
      if (msg.includes('slain')) return 'success';
      if (msg.includes('hit') || msg.includes('damage')) return 'combat-log';
      if (msg.includes('Generating') || msg.includes('Loading')) return 'loading';
      return '';
    }

    function random(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function generateCharacter() {
      const rarityMap = { 'Common': 1, 'Uncommon': 1.5, 'Rare': 2, 'Epic': 2.5, 'Legendary': 3 };
      
      gameState.player.class = data.classes[random(0, data.classes.length - 1)];
      gameState.player.rarity = data.rarities[random(0, 4)];
      
      const multiplier = rarityMap[gameState.player.rarity];
      gameState.player.strength = Math.floor(10 * multiplier);
      gameState.player.agility = Math.floor(10 * multiplier);
      gameState.player.intelligence = Math.floor(8 * multiplier);
      gameState.player.maxHP = Math.floor(50 * multiplier);
      gameState.player.hp = gameState.player.maxHP;
      gameState.player.floor = 1;
      
      updateUI();
      document.getElementById('portraitBtn').disabled = false;
      document.getElementById('portraitStatus').textContent = 'Portrait ready! Click "Generate Portrait" to create AI artwork.';
      log(`‚≠ê New ${gameState.player.rarity} ${gameState.player.class} created!`);
    }

    function generatePortrait() {
      const portraitImg = document.getElementById('characterPortrait');
      const portraitStatus = document.getElementById('portraitStatus');
      
      portraitStatus.textContent = 'üîÑ Generating AI portrait with Pollinations.ai...';
      portraitStatus.className = 'loading';
      portraitImg.style.display = 'none';
      
      // Build prompt from character stats
      const prompt = `${gameState.player.rarity} ${gameState.player.class} RPG character portrait, fantasy art style, professional illustration, detailed armor, face visible, epic lighting`;
      const encodedPrompt = encodeURIComponent(prompt);
      const seed = random(1000, 999999);
      const imageUrl = `https://image.pollinations.ai/prompt/${encodedPrompt}?width=512&height=512&seed=${seed}&nologo=true`;
      
      // Load image
      portraitImg.onload = function() {
        portraitStatus.textContent = '‚úÖ Portrait generated!';
        portraitStatus.style.color = '#44ff44';
        portraitImg.style.display = 'block';
        log(`üé¨ AI Portrait generated for your ${gameState.player.rarity} ${gameState.player.class}!`);
      };
      
      portraitImg.onerror = function() {
        portraitStatus.textContent = '‚ùå Failed to generate portrait. Try again!';
        portraitStatus.style.color = '#ff4444';
        log(`‚ùå Portrait generation failed. Check your internet connection.`);
      };
      
      portraitImg.src = imageUrl;
    }

    function enterDungeon() {
      gameState.player.floor = random(1, 10);
      gameState.player.hp = gameState.player.maxHP;
      log(`üö™ Entered Floor ${gameState.player.floor} of the dungeon...`);
      updateUI();
    }

    function updateUI() {
      document.getElementById('charClass').textContent = gameState.player.class;
      document.getElementById('playerHP').textContent = gameState.player.hp + ' / ' + gameState.player.maxHP;
      document.getElementById('rarity').textContent = gameState.player.rarity;
      document.getElementById('floor').textContent = gameState.player.floor;
      document.getElementById('strength').textContent = gameState.player.strength;
      document.getElementById('agility').textContent = gameState.player.agility;
    }

    function resetGame() {
      gameState.player.hp = gameState.player.maxHP;
      gameState.player.floor = 1;
      document.getElementById('characterPortrait').style.display = 'none';
      document.getElementById('portraitStatus').textContent = 'Portrait ready! Click "Generate Portrait" to create AI artwork.';
      document.getElementById('portraitStatus').style.color = '#aaa';
      updateUI();
      log('üîÑ Game reset. Ready for a new adventure!');
    }

    // Initialize
    updateUI();
  </script>
</body>
</html>
